

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title></title>
<meta th:fragment="mobile" name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
<script type="text/javascript" th:inline="javascript">var contextPath = [[@{/}]];</script>
<script type="text/javascript" th:src="@{/static/cdn/jquery.min-3.3.1.js}"></script>



<script type="text/javascript" th:inline="javascript">

$.ajaxSetup({
	error: function(r, textStatus, errorThrown) {
		alert("error:" + r.status + "|" + this.url);
	}
});

$(function() {

})


function go() {
	var clientId = $("#clientId").val();
	var lockerNumber = $("#lockerNumber").val();
	
	$.post(contextPath + "cellTool/listCell", {clientId:clientId, lockerNumber:lockerNumber}, function(r) {
		var c = $("#cellTable");
		var cellMap = [];
		for (var i = 0; i < r.list.length; i++) {
			var bit = r.list[i].cell_bit;
			cellMap[bit] = r.list[i].cell_id;
		}
		var n = $("#newCellTable");
		n.html("");
		for (var i = 0; i < r.rowList.length; i++) {
			n.append('<tr>');
			for (var j = 0; j < r.columnList.length; j++) {
				var bit = r.rowList[i] + r.columnList[j];
				n.append('<td>' + cellMap[bit] + '(' + bit + ')' + '</td>');
			}
			n.append('</tr>');
		}
	});
}

function addRow() {
	var clientId = $("#clientId").val();
	var lockerNumber = $("#lockerNumber").val();
	
	$.post(contextPath + "cellTool/addRow", {clientId:clientId, lockerNumber:lockerNumber}, function(r) {
		if (r.code == 0) {
			go();
		}
		else {
			alert(JSON.stringify(r));
		}
	})
}

function addColumn() {
	var clientId = $("#clientId").val();
	var lockerNumber = $("#lockerNumber").val();
	
	$.post(contextPath + "cellTool/addColumn", {clientId:clientId, lockerNumber:lockerNumber}, function(r) {
		if (r.code == 0) {
			go();
		}
		else {
			alert(JSON.stringify(r));
		}
	})
}

function delRow() {
	var clientId = $("#clientId").val();
	var lockerNumber = $("#lockerNumber").val();
	
	$.post(contextPath + "cellTool/delRow", {clientId:clientId, lockerNumber:lockerNumber}, function(r) {
		if (r.code == 0) {
			go();
		}
		else {
			alert(JSON.stringify(r));
		}
	})
}


function delColumn() {
	var clientId = $("#clientId").val();
	var lockerNumber = $("#lockerNumber").val();
	
	$.post(contextPath + "cellTool/delColumn", {clientId:clientId, lockerNumber:lockerNumber}, function(r) {
		if (r.code == 0) {
			go();
		}
		else {
			alert(JSON.stringify(r));
		}
	})
}


</script>
</head>

<body>

<div>
client
<select id="clientId">
	<option value="007">007</option>
</select>
number
<select id="lockerNumber">
	<option value="A">A</option>
	<option value="A">B</option>
</select>
</div>

<button onclick="go()">GO</button>
<button onclick="addRow()">+ROW</button>
<button onclick="addColumn()">+COL</button>


<button onclick="delRow()">-ROW</button>
<button onclick="delColumn()">-COL</button>


<table id="newCellTable" border="1"></table>

</body>
</html>








